<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 移动端适配方案 · 我只是一只小前端</title><meta name="description" content="移动端适配方案 - Selva"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><script type="text/javascript" src="js/bdtj.js"></script><link rel="search" type="application/opensearchdescription+xml" href="https://li1xu1bin.github.io/atom.xml" title="我只是一只小前端"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">主页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="https://li1xu1bin.github.io/little-note/" target="_blank" class="nav-list-link">小笔记</a></li><li class="nav-list-item"><a href="https://github.com/li1xu1bin" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://i.ui.cn/ucenter/927889.html" target="_blank" class="nav-list-link">UI中国</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">移动端适配方案</h1><div class="post-info">2017年5月1日</div><div class="post-content"><h1 id="0-基本概念"><a href="#0-基本概念" class="headerlink" title="0.基本概念"></a>0.基本概念</h1><p><img src="/images/dpr.png" alt="image"><br>以iPhone6为例：<br>物理像素为 750x1334<br>设备独立像素为 375x667<br>所以dpr=2</p>
<h1 id="1-宁馨儿成长记的方案"><a href="#1-宁馨儿成长记的方案" class="headerlink" title="1.宁馨儿成长记的方案"></a>1.宁馨儿成长记的方案</h1><p>移动端适配原理：<br>用下面这段JS动态设置html的font-size大小<br>Rem是相对于根元素html的font-size来做计算的单位</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">doc, win</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> docEl = doc.documentElement,</span><br><span class="line">            resizeEvt = <span class="string">'orientationchange'</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">'orientationchange'</span> : <span class="string">'resize'</span>,</span><br><span class="line">            recalc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> clientWidth = docEl.clientWidth;</span><br><span class="line">                <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span>;</span><br><span class="line">                docEl.style.fontSize = <span class="number">20</span> * (clientWidth / <span class="number">375</span>) + <span class="string">'px'</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">         <span class="keyword">if</span> (!doc.addEventListener) <span class="keyword">return</span>;</span><br><span class="line">        win.addEventListener(resizeEvt, recalc, <span class="literal">false</span>);</span><br><span class="line">        doc.addEventListener(<span class="string">'DOMContentLoaded'</span>, recalc, <span class="literal">false</span>);</span><br><span class="line">&#125;)(<span class="built_in">document</span>, <span class="built_in">window</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><p>如果设计稿尺寸是375x667，iphone6的设备独立像素为375x667<br>所以iPhone6的fontsize是20*（375/375）=20px,即把1em当20px用<br>设计稿切出的某元素像素为220px,就写成220/20=11em<br>在线例子：</p>
<iframe id="cp_embed_oXRXLL" src="//codepen.io/li1xu1bin/embed/oXRXLL?height=400px&theme-id=dark&slug-hash=oXRXLL&default-tab=result" scrolling="no" frameborder="no" height="400px" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" style="width: 900px; overflow: hidden;"></iframe>
<h1 id="2-手淘的flexible方案"><a href="#2-手淘的flexible方案" class="headerlink" title="2.手淘的flexible方案"></a>2.手淘的flexible方案</h1><p>上面这个例子的字体为什么不使用rem而是采用px呢？<br>因为字体大小使用rem，由于等比例的存在，在小屏幕下就会存在小屏幕字体更小的情况，不利于我们更好的去阅读，违背了适配的初衷。</p>
<p>所以更好的做法就是使用px和媒体查询来进行适配，比如flexible的方案：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@<span class="keyword">mixin</span> font-dpr($font-size) &#123;</span><br><span class="line">    font-size: $font-size;</span><br><span class="line">     <span class="selector-attr">[data-dpr="2"]</span> &amp; &#123;</span><br><span class="line">       <span class="attribute">font-size</span>: $font-size * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="selector-attr">[data-dpr="3"]</span> &amp; &#123;</span><br><span class="line">       <span class="attribute">font-size</span>: $font-size * <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用Flexible实现手淘H5页面的终端适配"><a href="#使用Flexible实现手淘H5页面的终端适配" class="headerlink" title="使用Flexible实现手淘H5页面的终端适配"></a><a href="https://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html" target="_blank" rel="noopener">使用Flexible实现手淘H5页面的终端适配</a></h2><h2 id="再聊移动端页面的适配"><a href="#再聊移动端页面的适配" class="headerlink" title="再聊移动端页面的适配"></a><a href="https://www.w3cplus.com/css/vw-for-layout.html" target="_blank" rel="noopener">再聊移动端页面的适配</a></h2><h2 id="px转Rem插件"><a href="#px转Rem插件" class="headerlink" title="px转Rem插件"></a><a href="https://github.com/flashlizi/cssrem" target="_blank" rel="noopener">px转Rem插件</a></h2><h2 id="基于vue-cli配置移动端自适应"><a href="#基于vue-cli配置移动端自适应" class="headerlink" title="基于vue-cli配置移动端自适应"></a><a href="http://hjingren.cn/2017/06/16/%E5%9F%BA%E4%BA%8Evue-cli%E9%85%8D%E7%BD%AE%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%87%AA%E9%80%82%E5%BA%94/#%E6%B7%BB%E5%8A%A0-meta-%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener">基于vue-cli配置移动端自适应</a></h2><h1 id="3-图片自适应"><a href="#3-图片自适应" class="headerlink" title="3.图片自适应"></a>3.图片自适应</h1><p>方法一：使用 CSS 的 DevicePixelRatio 媒体查询属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*默认大小*/</span></span><br><span class="line"><span class="selector-class">.photo</span> &#123;<span class="attribute">background-image</span>: <span class="built_in">url</span>(image100.png);&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 如果设备像素大于等于2，则用2倍图 */</span></span><br><span class="line">@<span class="keyword">media</span> screen and (-webkit-min-device-pixel-ratio: <span class="number">2</span>),</span><br><span class="line">screen and (min--moz-device-pixel-ratio: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="selector-class">.photo</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(image200.png);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 如果设备像素大于等于3，则用3倍图 */</span></span><br><span class="line">@<span class="keyword">media</span> screen and (-webkit-min-device-pixel-ratio: <span class="number">3</span>),</span><br><span class="line">screen and (min--moz-device-pixel-ratio: <span class="number">3</span>) &#123;</span><br><span class="line">  <span class="selector-class">.photo</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(image300.png);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二:直接使用 IMG 的 SRCSET 属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"100"</span> <span class="attr">src</span>=<span class="string">"image100.png"</span> <span class="attr">srcset</span>=<span class="string">"image200.png 2x,image300.png 3x"</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="4-响应式和自适应的区别"><a href="#4-响应式和自适应的区别" class="headerlink" title="4.响应式和自适应的区别"></a>4.响应式和自适应的区别</h1><p>响应式针对的是不同分辨率设备而进行的适配式设计，以利用@media规则为主要手段，而自适应则忽略@media以比例布局为主，目的是适应不同的浏览器窗口大小。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/08/11/实验性/" class="prev">上一篇</a><a href="/2017/04/17/宁馨儿成长记/" class="next">下一篇</a></div><div class="copyright"><p>© 2016 - 2018 <a href="https://li1xu1bin.github.io">Selva</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":100,"height":100,"hOffset":0,"vOffset":-20},"mobile":{"show":false},"react":{"opacityDefault":1}});</script></body></html>